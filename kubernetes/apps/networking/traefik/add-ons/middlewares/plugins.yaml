---
apiVersion: traefik.containo.us/v1alpha1
kind: Middleware
metadata:
  name: plugin-cf-connecting-ip
  namespace: networking
spec:
  plugin:
    cloudflarewarp:
      # disableDefault: "false" # use built-in list of cloudflare ips
      trustip: # Trust IPS not required if disableDefault is false - we will allocate Cloud Flare IPs automatically
        # - 10.1.0.0/16
        # - 10.2.0.0/16
        # - 10.1.0.0/16
        - 10.0.0.0/8
        # - 172.16.0.0/12
        - 192.168.0.0/16
---
apiVersion: traefik.containo.us/v1alpha1
kind: Middleware
metadata:
  name: plugin-real-ip
  namespace: networking
spec:
  plugin:
    real-ip:
      Proxy:
        - proxyHeadername: X-From-Cf
          proxyHeadervalue: cf-real
          realIP: Cf-Connecting-Ip
          overwriteXFF: true
