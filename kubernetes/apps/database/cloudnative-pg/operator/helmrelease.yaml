---
# yaml-language-server: $schema=https://raw.githubusercontent.com/cloudnative-pg/charts/main/charts/cloudnative-pg/values.schema.json
apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: cnpg-operator
spec:
  chartRef:
    kind: OCIRepository
    name: cloudnativepg
  interval: 1h
  values:
    crds:
      create: true

    monitoring:
      podMonitorEnabled: false
      grafanaDashboard:
        create: true

    resources:
      requests:
        cpu: 25m
        memory: 128Mi
      limits:
        memory: 256Mi

    podAnnotations:
      reloader.stakater.com/search: "true"

    nodeSelector:
      node-role.kubernetes.io/control-plane: "true"
    tolerations:
      - key: node-role.kubernetes.io/control-plane
        operator: Exists
