# yaml-language-server: $schema=https://kubernetes-schemas.pages.dev/grafana.integreatly.org/grafanadashboard_v1beta1.json
---
apiVersion: grafana.integreatly.org/v1beta1
kind: GrafanaDashboard
metadata:
  name: grafana-dashboard-flux-cluster
  labels:
    app.kubernetes.io/name: grafana
    grafana.integreatly.org/instance: grafana
spec:
  folder: Flux
  url: https://raw.githubusercontent.com/fluxcd/flux2-monitoring-example/main/monitoring/configs/dashboards/cluster.json
  datasources:
    - inputName: DS_PROMETHEUS
      datasourceName: Prometheus
  instanceSelector:
    matchLabels:
      app.kubernetes.io/name: grafana
    grafana.integreatly.org/instance: grafana
---
apiVersion: grafana.integreatly.org/v1beta1
kind: GrafanaDashboard
metadata:
  name: grafana-dashboard-flux-control-plane
  labels:
    app.kubernetes.io/name: grafana
    grafana.integreatly.org/instance: grafana
spec:
  folder: Flux
  url: https://raw.githubusercontent.com/fluxcd/flux2-monitoring-example/main/monitoring/configs/dashboards/control-plane.json
  datasources:
    - inputName: DS_PROMETHEUS
      datasourceName: Prometheus
  instanceSelector:
    matchLabels:
      app.kubernetes.io/name: grafana
    grafana.integreatly.org/instance: grafana
---
apiVersion: grafana.integreatly.org/v1beta1
kind: GrafanaDashboard
metadata:
  name: grafana-dashboard-flux-logs
  labels:
    app.kubernetes.io/name: grafana
    grafana.integreatly.org/instance: grafana
spec:
  folder: Flux
  url: https://raw.githubusercontent.com/fluxcd/flux2-monitoring-example/main/monitoring/configs/dashboards/logs.json
  datasources:
    - inputName: DS_LOKI
      datasourceName: Loki
  instanceSelector:
    matchLabels:
      app.kubernetes.io/name: grafana
    grafana.integreatly.org/instance: grafana
