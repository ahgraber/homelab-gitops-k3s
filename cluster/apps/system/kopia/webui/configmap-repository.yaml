---
apiVersion: v1
kind: ConfigMap
metadata:
  name: kopia-config
  namespace: system
  labels:
    app.kubernetes.io/instance: kopia
    app.kubernetes.io/name: kopia
data:
  repository.config: |
    {
      "storage": {
        "type": "filesystem",
        "config": {
          "path": "/snapshots",
          "dirShards": null
        }
      },
      "caching": {
        "cacheDirectory": "cache",
        "maxCacheSize": 5242880000,
        "maxMetadataCacheSize": 5242880000,
        "maxListCacheDuration": 30
      },
      "hostname": "cluster",
      "username": "root",
      "description": "Cluster backups",
      "enableActions": false,
      "formatBlobCacheDuration": 900000000000
    }
